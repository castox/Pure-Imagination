
#cshop
new_dummy = {
	create_dynamic_title = {
		tier = empire
		name = "Dummy Empire"
	}
	create_title_and_vassal_change = {
		type = created
		save_scope_as = change
		add_claim_on_loss = no
	}
	scope:new_title = {
		set_capital_county = title:c_naxos
		set_landless_title = yes
		set_destroy_on_succession = yes
		set_delete_on_destroy = yes
		set_no_automatic_claims = yes
		set_definitive_form = yes
		set_can_be_named_after_dynasty = no
		change_title_holder = {
			holder = global_var:t_dummy
			change = scope:change
		}
	}
	resolve_title_and_vassal_change = scope:change
	global_var:t_dummy= {
		set_variable = {
			name = peasant_title
			value = scope:new_title
		}
	}
	scope:new_title = { generate_coa = factions }
}
reincarnate_dummy = {
	if = {
		limit = {
			global_var:t_dummy = { is_alive = no }
		}

			create_character = {
				template_character = global_var:t_dummy
				save_scope_as = new_dummy
				template = t_dummy_template
				location = title:c_naxos
				after_creation = {
					copy_inheritable_appearance_from = global_var:t_dummy
					set_immortal_age = 24
					change_first_name = "Dummy"
					set_house = global_var:t_dummy.house
					add_character_flag = has_scripted_appearance
					add_character_flag = is_target_dummy
					set_global_variable = { name = t_dummy value = scope:new_dummy }
					new_dummy = yes
				}
			}
		
	}
}
get_dummy_effect = {
	
	set_variable = { name = power_bar value = 0 }
	remove_character_flag = dummy_target_1
	remove_character_flag = dummy_target_2
	remove_character_flag = dummy_target_3
	global_var:t_dummy = {
		remove_character_flag = is_target_dummy_hit
	}
	remove_character_flag = haim
	remove_character_flag = maim
	remove_character_flag = laim


	random_list = {
		10 = {
			add_character_flag = dummy_target_1
		}
		10 = {
			add_character_flag = dummy_target_2
		}
		5 = {
			add_character_flag = dummy_target_3
		}
	}
}
end_archer_game = {
	if = {
		limit = {
			AND = {
				var:target_c > var:target_c1
				var:target_c > var:target_c2
			}
		}
		add_character_flag = b_you_won

		set_variable = {
			name = archer_winner
			value = root
		}

		var:archer1 = {
			pay_short_term_gold = {
				target = prev
				gold = 50
			}
		}
		var:archer2 = {
			pay_short_term_gold = {
				target = prev
				gold = 50
			}
		}
	}
	if = {
		limit = {
			AND = {
				var:target_c1 > var:target_c
				var:target_c1 > var:target_c2
			}
		}
		add_character_flag = b_you_lost
		var:archer1 = {
			root = {
				set_variable = {
					name = archer_winner
					value = prev
				}
			}
		}

		pay_short_term_gold = {
			target = var:archer1
			gold = 50
		}

		var:archer2 = {
			pay_short_term_gold = {
				target = var:archer1
				gold = 50
			}
		}
	}
	if = {
		limit = {
			AND = {
				var:target_c2 > var:target_c
				var:target_c2 > var:target_c1
			}
		}
		add_character_flag = b_you_lost
		var:archer2 = {
			root = {
				set_variable = {
					name = archer_winner
					value = prev
				}
			}
		}

		pay_short_term_gold = {
			target = var:archer2
			gold = 50
		}

		var:archer1 = {
			pay_short_term_gold = {
				target = var:archer2
				gold = 50
			}
		}
	}
	if = {
		limit = {
			AND = {
				var:target_c = var:target_c1
				var:target_c > var:target_c2
			}
		}

		add_character_flag = b_you_tied

		var:archer1 = {
			root = {
				set_variable = {
					name = archer_winner
					value = prev
				}
			}
		}

		var:archer2 = {
			pay_short_term_gold = {
				target = prev
				gold = 25
			}
			pay_short_term_gold = {
				target = var:archer1
				gold = 25
			}
		}
	}
	if = {
		limit = {
			AND = {
				var:target_c = var:target_c2
				var:target_c > var:target_c1
			}

		}
		
		add_character_flag = b_you_tied

		var:archer2 = {
			root = {
				set_variable = {
					name = archer_winner
					value = prev
				}
			}
		}
		var:archer1 = {
			pay_short_term_gold = {
				target = prev
				gold = 25
			}
			pay_short_term_gold = {
				target = var:archer2
				gold = 25
			}
		}
	}
	if ={
		limit = {
			NOT = {
				has_variable = var:b_highscore
			}
		}
		set_variable = {
			name = b_highscore
			value = 0
		}
	}
	if = {
		limit = {
			var:target_c > var:b_highscore
		}
		set_variable = {
			name = b_highscore
			value = var:target_c
		}
	}
}